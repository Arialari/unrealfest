import { CodeSurfer } from "mdx-deck-code-surfer"
export { default as theme } from "./theme"
import vsDark from "prism-react-renderer/themes/vsDark"
import { Appear } from 'mdx-deck'
import { Head } from 'mdx-deck'

# UE4

<Head><title>UE4</title></Head>

---
## Original agenda

- Quick history of the studio
- Overview of the shipped UE games
- Internal teams and management
- Coding Standards and approach
- Content Standards and enforcing
- Engine changes
- Game architecture / modules
- Unit / Functional testing
- Approach in ECS design
- Learnings from GAS
- Tools overview
- Submit and review policies
- Build pipelines / CI
- Engine migrations and merge strategy
- Multiple project management

---
## Revised agenda

- Intro & history
- Coding & Content Standards
  * Coding std
  * Content std
  * Content validators
- Compilation / CI
  * Build machines / hardware
  * Build Graph
  * Pre-Commit
  * Triggers
- Testing infrastructure
- UGS
- Project structure
  * Module organisation
  * Various bits like the testing macro
- Tools
- Tech Art tools
  * TODO: ask Mark V
- Multiple Projects
- Engine updates

---
## Company history

TODO: get the timeline and spread in 2-3 slides

---
## UE4 games

* Gears Ultimate Edition
* Gears 4 and 5
* Gears Tactics
* Chelan
* multiple announced titles

---
## Teams and Projects

* how we run multiple Projects
* how we share information
* splash-engine

---
## Coding Standards

TODO: insert prev deck
TODO: showcase more UE4 stuff

---
## Content Standards

---
## Motivation

- Content creation and management is an integral part of development
- Poor organisation and practices for assets
  * compound over time
  * waste productivity
  * increase cooking and deployment times
- UE4 Editor is easy to modify to
  * improve workflows
  * enforce good practices

---
## Definitions

![asset naming](img/content-std/template.png)

- Asset naming rules
  * less confusion and improves searching/browsing
  * `Prefix` and `BaseAssetName` are mandatory

---
## Example

![asset examples](img/content-std/example_1.png)

---
## Enforcing

- Automated checker / validator
  * Editor commandlet
  * uses preset JSON list
  * matches asset type against name
- Intercept new asset creation
  * TODO: screenshot

---
## Enforcing (cont.)

TODO: code scroll of the JSON list

---
## Content Validator

* unmap dev folder
* the cook-all trick we use
  * alternatives

---
## Pre-commit

TODO: rename from submit to commit

---
<CodeSurfer
  title="Normal Submit Flow"
  code={require("!raw-loader!../flow/submit.txt")}
  theme={vsDark}
  lang="yaml"
  steps={[
    { notes: "" },
    { range: [ 1,  5] },
    { range: [10, 15] },
    { range: [23, 28] },
    { range: [36, 41] }
  ]}
/>

---
<CodeSurfer
  title="Pre Submit Flow"
  code={require("!raw-loader!../flow/pre-submit.txt")}
  theme={vsDark}
  lang="yaml"
  steps={[
    { notes: "" },
    { range: [ 1,  5] },
    { range: [10, 15] },
    { range: [23, 28] },
    { range: [36, 41] },
    { lines: [43, 47] },
    { range: [50, 53] },
    { range: [62, 66] },
  ]}
/>

---
## Pre-commit

* frontend vs backend
* frontend: Resharper / CVT
* backend: the build config with the 3 configs
  * how was done

---
## buildgraph

* talk about UBT and traditional build/cook/run scripts
  * disadvantages with this TODO: screenshot with multistep Raptor shit
* unify all paths
* minimal solution support
* consistent scripts
* project files ready
* infrastructure as code
  * we support both TeamCity and Jenkins
* what we modified

---
## UGS

  * how we use it
  * our modification
  * rewrote UGS script
  * code-data dependency

---
## Other

- testing
  * TODO: understand from work
- game structure
  * modules (types & layout)
- tools
  * code reviews tools
  * PCT 
  * CVT
  * Trigger
